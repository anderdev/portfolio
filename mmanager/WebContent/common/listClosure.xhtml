<ui:composition xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        template="../template/templateAPP.xhtml" >
        
        
        <ui:define name="contentAPP">
        	<h:form prependId="false" id="formSearchClosure">
        	
        		<h:outputText value="#{messages['lb_search_closure_list']}" styleClass="boxTitle"/>

				<p:growl id="msg" showDetail="true" showSummary="false" autoUpdate="true" sticky="true" /> 
				
				<h:panelGroup styleClass="searchContent">
	        		<div align="center" >
	        		
		        		<h:panelGrid columns="2" width="100%" border="0" columnClasses="alignLeft,alignRight">
			        		<h:panelGroup>
			        			<h:panelGrid columns="7"  border="0" columnClasses="column90,column90,column90,column90,column90,column100percentC,column90" >
			        				
			        				<p:selectOneMenu value="#{closureMBean.searchClosure.typeClosure.id}" label="#{messages['lb_type_closure_']}" >
							            <f:selectItem itemLabel="#{messages['lb_type_closure_']}" itemValue="" />
							            <f:selectItems value="#{closureMBean.typeClosures}"  var="desc" itemLabel="#{desc.type}" itemValue="#{desc}"/>  
							        </p:selectOneMenu>
							        
									<p:selectOneMenu value="#{closureMBean.searchClosure.currency.id}" label="#{messages['lb_currency_']}"  >
							            <f:selectItem itemLabel="#{messages['lb_currency_']}" itemValue="" />
							            <f:selectItems value="#{closureMBean.currencies}"  var="desc" itemLabel="#{desc.acronymn}" itemValue="#{desc}"/>  
							        </p:selectOneMenu>
			        				
							        <h:panelGroup>
								        <p:calendar id="from" value="#{closureMBean.searchClosure.startDate}"  
								        	maxlength="10"
											pattern="dd/MM/yyyy"
											size="7"
											yearRange="1950:2050"/>		
							        	<p:watermark for="from" value="#{messages['lb_from']}" style="width:100px"/>
							        </h:panelGroup>
							        
							        <h:panelGroup>
							        	<p:calendar id="to"  value="#{closureMBean.searchClosure.endDate}"  
								        	maxlength="10"
											pattern="dd/MM/yyyy"
											size="7"
											yearRange="1950:2050"/>	
							      	  <p:watermark for="to" value="#{messages['lb_to']}" />
							      	</h:panelGroup>
							      	
							      	<p:commandButton value="#{messages['lb_search_']}" styleClass="button" ajax="true"  action="#{closureMBean.search}" update="closureList" />
					      			<h:outputText value=""/>
					      			<!-- 
					      			<p:commandButton value="#{messages['lb_delete']}" styleClass="button" onclick="confirmDelete.show()" />
					      			 -->
					            </h:panelGrid>
			        		</h:panelGroup>
					    </h:panelGrid>
					   
					    <p:dataTable var="closure" value="#{closureMBean.searchClosureList}" style="width:100%" id="closureList"
				    		paginatorAlwaysVisible="false" paginator="true" emptyMessage="#{messages['lb_empty_list']}"
				    		rows="10" rowKey="#{closure}"
				    		paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                 			rowsPerPageTemplate="5,10,15,25,50"
                 			paginatorPosition="top" 
                 			selection="#{closureMBean.selectedClosure}" >
                 			
                 			<p:column selectionMode="multiple" style="width:3%;text-align:center"  />
                 			
                 			<f:facet name="footer">
                 				<h:panelGroup rendered="#{closureMBean.showMaths}">
                 					<h:panelGrid columns="5" styleClass="gridNoLayout"  border="0" columnClasses="column56percent,column110R,column110R,column110R">
                 						<p:column  >
                 							<h:outputText value=""/>
                 						</p:column>
	                 					 <p:column>
	                 					 	<h:outputText value="#{closureMBean.creditTotal}" style="color:blue;">
						    	 				<f:convertNumber pattern="###,##0.00"/>
						    	 			</h:outputText>
	                 					 </p:column>
	                 					 <p:column>
	                 					 	<h:outputText value="#{closureMBean.debitTotal}" style="color:red;" >
						    	 				<f:convertNumber pattern="###,##0.00"/>
						    	 			</h:outputText>
	                 					 </p:column>
	                 					 <p:column>
	                 					 	<h:outputText value="#{closureMBean.searchTotal}" >
							    	 				<f:convertNumber pattern="###,##0.00"/>
							    	 			</h:outputText>
	                 					 </p:column>
	                 				</h:panelGrid>
				                </h:panelGroup>
				            </f:facet>
                 			
				    	 	
					        <p:column sortBy="#{closure.date}"  style="width:110px;text-align:center;">
					             <f:facet name="header">
					                <h:outputText value="#{messages['lb_date_']}" />
					            </f:facet>
					            <h:outputText value="#{closure.date}">
					            	<f:convertDateTime pattern="dd/MM/yyyy" />
					            </h:outputText>
					        </p:column>
					        
					        <p:column sortBy="#{closure.typeClosure.type}" style="width:310px;text-align:center;">
					            <f:facet name="header">
					                <h:outputText value="#{messages['lb_type_closure_']}" />
					            </f:facet>
					            <h:outputText value="#{closure.typeClosure.type}" />
					        </p:column>
					        
					        <p:column style="width:110px;">
					            <f:facet name="header">
					                <h:outputText value="#{messages['lb_totalCredit_']}" />
					            </f:facet>
					            <div align="right">
						            <h:outputText value="#{closure.totalCredit}" >
						            	<f:convertNumber pattern="##0.00"/>
						            </h:outputText>
					            </div>
					        </p:column>
					        
					        <p:column style="width:110px;">
					            <f:facet name="header">
					                <h:outputText value="#{messages['lb_totalDebit_']}" />
					            </f:facet>
					            <div align="right">
						            <h:outputText value="#{closure.totalDebit}" >
						            	<f:convertNumber pattern="##0.00"/>
						            </h:outputText>
					            </div>
					        </p:column>
					        
					        <p:column style="width:110px;">
					            <f:facet name="header">
					                <h:outputText value="#{messages['lb_totalGeneral_']}" />
					            </f:facet>
					            <div align="right">
						            <h:outputText value="#{closure.totalGeneral}" >
						            	<f:convertNumber pattern="##0.00"/>
						            </h:outputText>
					            </div>
					        </p:column>
					        <!-- 
					        <p:column style="width:5%">
					        	<p:commandLink action="#{closureMBean.edit(true)}" 
					        		id="editButton" ajax="true" 
					        		immediate="true" >
					        
					        		<f:setPropertyActionListener value="#{closure}" target="#{closureMBean.closure}" />  
									<p:graphicImage value="#{messages['img_update']}" style="border: 0px" />
								</p:commandLink>
					        </p:column>
					         -->
					    </p:dataTable>
					</div>	
				</h:panelGroup>
				<p:confirmDialog message="#{messages['lb_multiple_exclusion']}" header="#{messages['lb_header_confirmation']}" severity="alert" widgetVar="confirmDelete">  
	            	<div align="center">
				        <p:commandButton value="#{messages['lb_yes']}" update="closureList" oncomplete="confirmDelete.hide()" action="#{closureMBean.delete}"/>  
				        <p:commandButton value="#{messages['lb_no']}" onclick="confirmDelete.hide()" type="button" />   
	                </div> 
	    		</p:confirmDialog>  
    		</h:form>
    		
        </ui:define>
</ui:composition>