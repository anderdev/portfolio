<ui:composition xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        template="../template/templateAPP.xhtml" >
        	
		<ui:define name="contentAPP">
        	<h:form prependId="false" id="formClosure">
	        	<h:outputText value="#{messages['lb_closure_registration']}" styleClass="boxTitle"/>

				<p:growl id="msg" showDetail="true" showSummary="false" autoUpdate="true" sticky="true" /> 
				
        		<div align="center" class="formContant">
	       	
		       		<h:panelGrid columns="2" styleClass="boldFont" columnClasses="column120RightWithPaddingRigth,column285" border="0">
	
						<h:outputText value="#{messages['lb_date']}"  />
						<p:calendar showButtonPanel="true" navigator="true" showOn="button"
							value="#{closureMBean.closure.date}"  label="#{messages['lb_date_']}"
							required="true" 
							id="calendar"
							readonlyInput="false"
						    maxlength="10"
							pattern="dd/MM/yyyy"/>
					</h:panelGrid>
					
					<h:panelGrid columns="4" styleClass="boldFont" columnClasses="column120RightWithPaddingRigth,column80,column80rightAlign,column80" border="0">	
						<h:outputText value="#{messages['lb_type_closure']}" />
						<p:selectOneMenu value="#{closureMBean.closure.typeClosure.id}" label="#{messages['lb_type_closure_']}" required="true" >
				            <f:selectItem itemLabel="#{messages['lb_select']}" itemValue="" />
				            <f:selectItems value="#{closureMBean.typeClosures}"  var="desc" itemLabel="#{desc.type}" itemValue="#{desc}"/>  
				        </p:selectOneMenu>
				         
				        <h:outputText value="#{messages['lb_currency']}" />
						<p:selectOneMenu value="#{closureMBean.closure.currency.id}" label="#{messages['lb_currency_']}" required="true" style="width:100%">
				            <f:selectItem itemLabel="#{messages['lb_select']}" itemValue="" />
				            <f:selectItems value="#{closureMBean.currencies}"  var="desc" itemLabel="#{desc.acronymn}" itemValue="#{desc}"/>  
				        </p:selectOneMenu>
				        
					</h:panelGrid>
					
					<br />
		
					<div align="center">
						<p:commandButton value="#{messages['lb_post']}" id="post" action="#{closureMBean.save}" ajax="false" update=":formClosure" styleClass="button"/>  
						<p:commandButton value="#{messages['lb_back']}" update=":formClosure" immediate="true" id="voltar" ajax="true"  styleClass="button" action="#{closureMBean.cancel}"/>
					</div>
				</div>
				
				<div class="formListContant">
					<p:dataTable var="reg" value="#{closureMBean.closureList}" style="width:100%" id="closureList"
				    		paginatorAlwaysVisible="false" paginator="true" emptyMessage="#{messages['lb_empty_list']}"
				    		rows="10" rowKey="#{reg}">
				    	
				        <p:column sortBy="#{reg.description.description}" >
				            <f:facet name="header">
				                <h:outputText value="#{messages['lb_description_']}" />
				            </f:facet>
				            <h:outputText value="#{reg.description.description}" />
				        </p:column>
				        
				        <p:column sortBy="#{reg.superGroup.description}" >
				            <f:facet name="header">
				                <h:outputText value="#{messages['lb_super_group_']}" />
				            </f:facet>
				            <h:outputText value="#{reg.superGroup.description}" />
				        </p:column>
				        
				        <p:column sortBy="#{reg.date}" style="width:100px;text-align:center;">
				            <f:facet name="header">
				                <h:outputText value="#{messages['lb_date_']}" />
				            </f:facet>
				            <h:outputText value="#{reg.date}">
				            	<f:convertDateTime pattern="dd/MM/yyyy" />
				            </h:outputText>
				        </p:column>
				        
				        <p:column sortBy="#{reg.amount}" style="width:90px;text-align:right;">
				            <f:facet name="header">
				                <h:outputText value="#{messages['lb_amount_']}" />
				            </f:facet>
				            <h:outputText value="#{reg.amount}" >
				            	<f:convertNumber pattern="##0.00"/>
				            </h:outputText>
				        </p:column>
				        
				        <p:column style="width:5%">
				        	<p:commandLink action="#{closureMBean.edit}" immediate="true" update=":formClosure" id="editButton">
				        		<f:setPropertyActionListener value="#{reg}" target="#{closureMBean.closure}" />  
								<p:graphicImage value="#{messages['img_update']}" style="border: 0px" />
							</p:commandLink>
				        </p:column>
				    </p:dataTable>
				</div>
			</h:form>
		</ui:define>
</ui:composition>
